{"ast":null,"code":"var _regeneratorRuntime = require(\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nvar readFromBlobOrFile = function readFromBlobOrFile(blob) {\n  return new Promise(function (resolve, reject) {\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = function (_ref) {\n      var code = _ref.target.error.code;\n      reject(Error(\"File could not be read! Code=\".concat(code)));\n    };\n    fileReader.readAsArrayBuffer(blob);\n  });\n};\n\n/**\n * loadImage\n *\n * @name loadImage\n * @function load image from different source\n * @access private\n */\nvar loadImage = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(image) {\n    var data, resp, blob;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          data = image;\n          if (!(typeof image === 'undefined')) {\n            _context2.next = 3;\n            break;\n          }\n          return _context2.abrupt(\"return\", 'undefined');\n        case 3:\n          if (!(typeof image === 'string')) {\n            _context2.next = 16;\n            break;\n          }\n          if (!/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\n            _context2.next = 8;\n            break;\n          }\n          data = atob(image.split(',')[1]).split('').map(function (c) {\n            return c.charCodeAt(0);\n          });\n          _context2.next = 14;\n          break;\n        case 8:\n          _context2.next = 10;\n          return fetch(image);\n        case 10:\n          resp = _context2.sent;\n          _context2.next = 13;\n          return resp.arrayBuffer();\n        case 13:\n          data = _context2.sent;\n        case 14:\n          _context2.next = 43;\n          break;\n        case 16:\n          if (!(typeof HTMLElement !== 'undefined' && image instanceof HTMLElement)) {\n            _context2.next = 30;\n            break;\n          }\n          if (!(image.tagName === 'IMG')) {\n            _context2.next = 21;\n            break;\n          }\n          _context2.next = 20;\n          return loadImage(image.src);\n        case 20:\n          data = _context2.sent;\n        case 21:\n          if (!(image.tagName === 'VIDEO')) {\n            _context2.next = 25;\n            break;\n          }\n          _context2.next = 24;\n          return loadImage(image.poster);\n        case 24:\n          data = _context2.sent;\n        case 25:\n          if (!(image.tagName === 'CANVAS')) {\n            _context2.next = 28;\n            break;\n          }\n          _context2.next = 28;\n          return new Promise(function (resolve) {\n            image.toBlob( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(blob) {\n                return _regeneratorRuntime().wrap(function _callee$(_context) {\n                  while (1) switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return readFromBlobOrFile(blob);\n                    case 2:\n                      data = _context.sent;\n                      resolve();\n                    case 4:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }, _callee);\n              }));\n              return function (_x2) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          });\n        case 28:\n          _context2.next = 43;\n          break;\n        case 30:\n          if (!(typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas)) {\n            _context2.next = 39;\n            break;\n          }\n          _context2.next = 33;\n          return image.convertToBlob();\n        case 33:\n          blob = _context2.sent;\n          _context2.next = 36;\n          return readFromBlobOrFile(blob);\n        case 36:\n          data = _context2.sent;\n          _context2.next = 43;\n          break;\n        case 39:\n          if (!(image instanceof File || image instanceof Blob)) {\n            _context2.next = 43;\n            break;\n          }\n          _context2.next = 42;\n          return readFromBlobOrFile(image);\n        case 42:\n          data = _context2.sent;\n        case 43:\n          return _context2.abrupt(\"return\", new Uint8Array(data));\n        case 44:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function loadImage(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nmodule.exports = loadImage;","map":{"version":3,"names":["readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","_ref","code","target","error","Error","concat","readAsArrayBuffer","loadImage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","image","data","resp","wrap","_callee2$","_context2","prev","next","abrupt","test","atob","split","map","c","charCodeAt","fetch","sent","arrayBuffer","HTMLElement","tagName","src","poster","toBlob","_ref3","_callee","_callee$","_context","stop","_x2","apply","arguments","OffscreenCanvas","convertToBlob","File","Blob","Uint8Array","_x","module","exports"],"sources":["C:/Users/竹内 海斗/workspace/Hackathon/20231027/node_modules/tesseract.js/src/worker/browser/loadImage.js"],"sourcesContent":["/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nconst readFromBlobOrFile = (blob) => (\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = ({ target: { error: { code } } }) => {\n      reject(Error(`File could not be read! Code=${code}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n  })\n);\n\n/**\n * loadImage\n *\n * @name loadImage\n * @function load image from different source\n * @access private\n */\nconst loadImage = async (image) => {\n  let data = image;\n  if (typeof image === 'undefined') {\n    return 'undefined';\n  }\n\n  if (typeof image === 'string') {\n    // Base64 Image\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\n      data = atob(image.split(',')[1])\n        .split('')\n        .map((c) => c.charCodeAt(0));\n    } else {\n      const resp = await fetch(image);\n      data = await resp.arrayBuffer();\n    }\n  } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\n    if (image.tagName === 'IMG') {\n      data = await loadImage(image.src);\n    }\n    if (image.tagName === 'VIDEO') {\n      data = await loadImage(image.poster);\n    }\n    if (image.tagName === 'CANVAS') {\n      await new Promise((resolve) => {\n        image.toBlob(async (blob) => {\n          data = await readFromBlobOrFile(blob);\n          resolve();\n        });\n      });\n    }\n  } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\n    const blob = await image.convertToBlob();\n    data = await readFromBlobOrFile(blob);\n  } else if (image instanceof File || image instanceof Blob) {\n    data = await readFromBlobOrFile(image);\n  }\n\n  return new Uint8Array(data);\n};\n\nmodule.exports = loadImage;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}