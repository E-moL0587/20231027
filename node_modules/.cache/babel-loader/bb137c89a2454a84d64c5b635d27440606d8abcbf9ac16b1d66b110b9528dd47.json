{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";// 撮影画面\nimport React,{useRef,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Camera(_ref){var onEditor=_ref.onEditor;// 初期化\nvar videoRef=useRef(null);var streamRef=useRef(null);useEffect(function(){// カメラを起動する\nvar startCamera=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var stream;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return navigator.mediaDevices.getUserMedia({video:true});case 2:stream=_context.sent;videoRef.current.srcObject=stream;streamRef.current=stream;case 5:case\"end\":return _context.stop();}},_callee);}));return function startCamera(){return _ref2.apply(this,arguments);};}();startCamera();},[]);// カメラを停止する\nvar stopCamera=function stopCamera(){var tracks=streamRef.current.getTracks();tracks.forEach(function(track){return track.stop();});};// 撮影する\nvar captureImage=function captureImage(){var canvas=document.createElement('canvas');var context=canvas.getContext('2d');canvas.width=videoRef.current.videoWidth;canvas.height=videoRef.current.videoHeight;context.drawImage(videoRef.current,0,0);var dataUrl=canvas.toDataURL('image/png');onEditor(dataUrl);stopCamera();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u753B\\u50CF\\u3092\\u7DE8\\u96C6\\u3059\\u308B\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,style:{width:'25%'}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:captureImage,children:\"\\u64AE\\u5F71\\u3059\\u308B\"})]});}export default Camera;","map":{"version":3,"names":["React","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","Camera","_ref","onEditor","videoRef","streamRef","startCamera","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","stream","wrap","_callee$","_context","prev","next","navigator","mediaDevices","getUserMedia","video","sent","current","srcObject","stop","apply","arguments","stopCamera","tracks","getTracks","forEach","track","captureImage","canvas","document","createElement","context","getContext","width","videoWidth","height","videoHeight","drawImage","dataUrl","toDataURL","children","ref","autoPlay","style","onClick"],"sources":["C:/Users/竹内 海斗/workspace/Hackathon/20231027/src/components/2-1_Camera.jsx"],"sourcesContent":["// 撮影画面\r\nimport React, { useRef, useEffect } from 'react';\r\n\r\nfunction Camera({ onEditor }) {\r\n\r\n  // 初期化\r\n  const videoRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n\r\n    // カメラを起動する\r\n    const startCamera = async () => {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      videoRef.current.srcObject = stream;\r\n      streamRef.current = stream;\r\n    };\r\n    startCamera();\r\n  }, []);\r\n\r\n  // カメラを停止する\r\n  const stopCamera = () => {\r\n    const tracks = streamRef.current.getTracks();\r\n    tracks.forEach(track => track.stop());\r\n  };\r\n\r\n  // 撮影する\r\n  const captureImage = () => {\r\n    const canvas  = document.createElement('canvas');\r\n    const context = canvas.getContext('2d');\r\n    canvas.width  = videoRef.current.videoWidth;\r\n    canvas.height = videoRef.current.videoHeight;\r\n    context.drawImage(videoRef.current, 0, 0);\r\n    const dataUrl = canvas.toDataURL('image/png');\r\n    onEditor(dataUrl);\r\n    stopCamera();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>画像を編集する</h2>\r\n      <video ref={videoRef} autoPlay style={{ width: '25%' }} /><br/>\r\n      <button onClick={captureImage}>撮影する</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Camera;\r\n"],"mappings":"0TAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjD,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAAe,IAAZ,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAExB;AACA,GAAM,CAAAC,QAAQ,CAAGT,MAAM,CAAC,IAAI,CAAC,CAC7B,GAAM,CAAAU,SAAS,CAAGV,MAAM,CAAC,IAAI,CAAC,CAE9BC,SAAS,CAAC,UAAM,CAEd;AACA,GAAM,CAAAU,WAAW,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,MAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACG,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,QAAnET,MAAM,CAAAG,QAAA,CAAAO,IAAA,CACZlB,QAAQ,CAACmB,OAAO,CAACC,SAAS,CAAGZ,MAAM,CACnCP,SAAS,CAACkB,OAAO,CAAGX,MAAM,CAAC,wBAAAG,QAAA,CAAAU,IAAA,MAAAd,OAAA,GAC5B,kBAJK,CAAAL,WAAWA,CAAA,SAAAC,KAAA,CAAAmB,KAAA,MAAAC,SAAA,OAIhB,CACDrB,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAM,CAAAsB,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,GAAM,CAAAC,MAAM,CAAGxB,SAAS,CAACkB,OAAO,CAACO,SAAS,CAAC,CAAC,CAC5CD,MAAM,CAACE,OAAO,CAAC,SAAAC,KAAK,QAAI,CAAAA,KAAK,CAACP,IAAI,CAAC,CAAC,GAAC,CACvC,CAAC,CAED;AACA,GAAM,CAAAQ,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB,GAAM,CAAAC,MAAM,CAAIC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAChD,GAAM,CAAAC,OAAO,CAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC,CACvCJ,MAAM,CAACK,KAAK,CAAInC,QAAQ,CAACmB,OAAO,CAACiB,UAAU,CAC3CN,MAAM,CAACO,MAAM,CAAGrC,QAAQ,CAACmB,OAAO,CAACmB,WAAW,CAC5CL,OAAO,CAACM,SAAS,CAACvC,QAAQ,CAACmB,OAAO,CAAE,CAAC,CAAE,CAAC,CAAC,CACzC,GAAM,CAAAqB,OAAO,CAAGV,MAAM,CAACW,SAAS,CAAC,WAAW,CAAC,CAC7C1C,QAAQ,CAACyC,OAAO,CAAC,CACjBhB,UAAU,CAAC,CAAC,CACd,CAAC,CAED,mBACE5B,KAAA,QAAA8C,QAAA,eACEhD,IAAA,OAAAgD,QAAA,CAAI,4CAAO,CAAI,CAAC,cAChBhD,IAAA,UAAOiD,GAAG,CAAE3C,QAAS,CAAC4C,QAAQ,MAACC,KAAK,CAAE,CAAEV,KAAK,CAAE,KAAM,CAAE,CAAE,CAAC,cAAAzC,IAAA,QAAI,CAAC,cAC/DA,IAAA,WAAQoD,OAAO,CAAEjB,YAAa,CAAAa,QAAA,CAAC,0BAAI,CAAQ,CAAC,EACzC,CAAC,CAEV,CAEA,cAAe,CAAA7C,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}