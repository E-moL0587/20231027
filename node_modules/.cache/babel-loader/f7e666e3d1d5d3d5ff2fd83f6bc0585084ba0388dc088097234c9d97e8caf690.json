{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u7AF9\\u5185 \\u6D77\\u6597\\\\workspace\\\\Hackathon\\\\20231027\\\\src\\\\components\\\\4_OCR.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Tesseract from 'tesseract.js';\nimport db from '../firebase';\nimport { collection, addDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OCR({\n  image,\n  clipPath,\n  onRestart,\n  onExit\n}) {\n  _s();\n  const [text, setText] = useState('');\n  const [searchResultURL, setSearchResultURL] = useState('');\n\n  // データを保存する\n  const handleSave = async () => {\n    await addDoc(collection(db, 'collection'), {\n      field1: image,\n      field2: text,\n      searchResultURL\n    });\n    alert('保存されました！');\n  };\n  useEffect(() => {\n    // OCR処理\n    const doOCR = async () => {\n      const {\n        data\n      } = await Tesseract.recognize(image, 'jpn', {\n        logger: m => console.log(m)\n      });\n      const cleanedText = data.text.replace(/\\s/g, '');\n      setText(cleanedText);\n\n      // テキストを使用してウェブ検索をシミュレート\n      const searchQuery = encodeURI(cleanedText);\n      const searchURL = `https://www.google.com/search?q=${searchQuery}`;\n      setSearchResultURL(searchURL);\n    };\n    doOCR();\n  }, [image]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u64AE\\u5F71\\u3055\\u308C\\u305F\\u753B\\u50CF\\u306F\\u3053\\u3061\\u3089\\u3067\\u3059\\uFF01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      alt: \"\\u753B\\u50CF\",\n      style: {\n        clipPath: clipPath,\n        width: '50%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 80\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onRestart,\n      children: \"\\u3082\\u3046\\u4E00\\u5EA6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onExit,\n      children: \"\\u7D42\\u4E86\\u3059\\u308B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSave,\n      children: \"\\u4FDD\\u5B58\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u62BD\\u51FA\\u3057\\u305F\\u6587\\u5B57\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), searchResultURL && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u691C\\u7D22\\u7D50\\u679C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: searchResultURL,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"\\u691C\\u7D22\\u7D50\\u679C\\u3092\\u8868\\u793A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(OCR, \"nrpqc0r5I8sBxZo6N2kJYtWWojM=\");\n_c = OCR;\nexport default OCR;\nvar _c;\n$RefreshReg$(_c, \"OCR\");","map":{"version":3,"names":["React","useState","useEffect","Tesseract","db","collection","addDoc","jsxDEV","_jsxDEV","OCR","image","clipPath","onRestart","onExit","_s","text","setText","searchResultURL","setSearchResultURL","handleSave","field1","field2","alert","doOCR","data","recognize","logger","m","console","log","cleanedText","replace","searchQuery","encodeURI","searchURL","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","style","width","onClick","href","target","rel","_c","$RefreshReg$"],"sources":["C:/Users/竹内 海斗/workspace/Hackathon/20231027/src/components/4_OCR.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Tesseract from 'tesseract.js';\r\nimport db from '../firebase';\r\nimport { collection, addDoc } from 'firebase/firestore';\r\n\r\nfunction OCR({ image, clipPath, onRestart, onExit }) {\r\n  const [text, setText] = useState('');\r\n  const [searchResultURL, setSearchResultURL] = useState('');\r\n\r\n  // データを保存する\r\n  const handleSave = async () => {\r\n    await addDoc(collection(db, 'collection'), { field1: image, field2: text, searchResultURL });\r\n    alert('保存されました！');\r\n  };\r\n\r\n  useEffect(() => {\r\n\r\n    // OCR処理\r\n    const doOCR = async () => {\r\n      const { data } = await Tesseract.recognize(image, 'jpn', { logger: (m) => console.log(m) });\r\n      const cleanedText = data.text.replace(/\\s/g, '');\r\n\r\n      setText(cleanedText);\r\n\r\n      // テキストを使用してウェブ検索をシミュレート\r\n      const searchQuery = encodeURI(cleanedText);\r\n      const searchURL = `https://www.google.com/search?q=${searchQuery}`;\r\n      setSearchResultURL(searchURL);\r\n    };\r\n    doOCR();\r\n  }, [image]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>撮影された画像はこちらです！</h2>\r\n      <img src={image} alt=\"画像\" style={{ clipPath: clipPath, width: '50%' }} /><br />\r\n      <button onClick={onRestart}>もう一度</button>\r\n      <button onClick={onExit}>終了する</button>\r\n      <button onClick={handleSave}>保存</button>\r\n      <h2>抽出した文字</h2>\r\n      <p>{text}</p>\r\n      {searchResultURL && (\r\n        <div>\r\n          <h2>検索結果</h2>\r\n          <a href={searchResultURL} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            検索結果を表示\r\n          </a>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OCR;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}