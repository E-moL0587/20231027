{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/\\u7AF9\\u5185 \\u6D77\\u6597/workspace/Hackathon/20231027/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// OCR処理(画像からテキストを抽出する)画面\nimport React,{useState,useEffect}from'react';import Tesseract from'tesseract.js';import db from'../firebase';import{collection,addDoc}from'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OCR(_ref){var image=_ref.image,clipPath=_ref.clipPath,onRestart=_ref.onRestart,onExit=_ref.onExit;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];// データを保存する\nvar handleSave=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return addDoc(collection(db,'collection'),{field1:image,field2:text});case 2:alert('保存されました！');case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSave(){return _ref2.apply(this,arguments);};}();useEffect(function(){// OCR処理\nvar doOCR=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$Tesseract$reco,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Tesseract.recognize(image,'jpn',{logger:function logger(m){return console.log(m);}});case 2:_yield$Tesseract$reco=_context2.sent;data=_yield$Tesseract$reco.data;setText(data.text);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function doOCR(){return _ref3.apply(this,arguments);};}();doOCR();},[image]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u64AE\\u5F71\\u3055\\u308C\\u305F\\u753B\\u50CF\\u306F\\u3053\\u3061\\u3089\\u3067\\u3059\\uFF01\"}),/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"\\u753B\\u50CF\",style:{clipPath:clipPath,width:'25%'}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:onRestart,children:\"\\u3082\\u3046\\u4E00\\u5EA6\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onExit,children:\"\\u7D42\\u4E86\\u3059\\u308B\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u62BD\\u51FA\\u3057\\u305F\\u6587\\u5B57\"}),/*#__PURE__*/_jsx(\"p\",{children:text})]});}export default OCR;","map":{"version":3,"names":["React","useState","useEffect","Tesseract","db","collection","addDoc","jsx","_jsx","jsxs","_jsxs","OCR","_ref","image","clipPath","onRestart","onExit","_useState","_useState2","_slicedToArray","text","setText","handleSave","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","field1","field2","alert","stop","apply","arguments","doOCR","_ref3","_callee2","_yield$Tesseract$reco","data","_callee2$","_context2","recognize","logger","m","console","log","sent","children","src","alt","style","width","onClick"],"sources":["C:/Users/竹内 海斗/workspace/Hackathon/20231027/src/components/4_OCR.jsx"],"sourcesContent":["// OCR処理(画像からテキストを抽出する)画面\r\nimport React, { useState, useEffect } from 'react';\r\nimport Tesseract from 'tesseract.js';\r\nimport db from '../firebase';\r\nimport { collection, addDoc } from 'firebase/firestore';\r\n\r\nfunction OCR({ image, clipPath, onRestart, onExit }) {\r\n  const [text, setText] = useState('');\r\n\r\n  // データを保存する\r\n  const handleSave = async () => {\r\n    await addDoc(collection(db, 'collection'), { field1: image, field2: text });\r\n    alert('保存されました！');\r\n  };\r\n\r\n  useEffect(() => {\r\n\r\n    // OCR処理\r\n    const doOCR = async () => {\r\n      const { data } = await Tesseract.recognize(image, 'jpn', { logger: (m) => console.log(m) });\r\n      setText(data.text);\r\n    };\r\n    doOCR();\r\n  }, [image]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>撮影された画像はこちらです！</h2>\r\n      <img src={image} alt=\"画像\" style={{ clipPath: clipPath, width: '25%' }} /><br />\r\n      <button onClick={onRestart}>もう一度</button>\r\n      <button onClick={onExit}>終了する</button>\r\n      <button onClick={handleSave}>保存</button>\r\n      <h2>抽出した文字</h2>\r\n      <p>{text}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OCR;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}